
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style>
      .lang-selector {
        text-transform: uppercase;
      }
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;php&quot;,&quot;python&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="php">php</a>
              <a href="#" data-language-name="python">python</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Поиск">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#vvyedyeniye" class="toc-h1 toc-link" data-title="Введение">Введение</a>
          </li>
          <li>
            <a href="#tyerminy-i-opryedyelyeniya" class="toc-h1 toc-link" data-title="Термины и определения">Термины и определения</a>
          </li>
          <li>
            <a href="#scyenarij-raboty-sistyemy-dlya-mikrokryeditovaniya-p2b" class="toc-h1 toc-link" data-title="Сценарий работы системы для микрокредитования P2B">Сценарий работы системы для микрокредитования P2B</a>
          </li>
          <li>
            <a href="#opisaniye-myetodov" class="toc-h1 toc-link" data-title="Описание методов">Описание методов</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#format-zaprosa" class="toc-h2 toc-link" data-title="Формат запроса">Формат запроса</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#rabota-s-kliyentami" class="toc-h1 toc-link" data-title="Работа с клиентами">Работа с клиентами</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#sozdaniye-kliyenta" class="toc-h2 toc-link" data-title="Создание клиента">Создание клиента</a>
                  </li>
                  <li>
                    <a href="#poluchit-id-polzovatyelya" class="toc-h2 toc-link" data-title="Получить ID пользователя">Получить ID пользователя</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#oshibki" class="toc-h1 toc-link" data-title="Ошибки">Ошибки</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://diwa.online/'>Зарегистрироваться и получить ключ</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='vvyedyeniye'>Введение</h1>
<p>Программная платформа Digital Wallet (ПО «DiWa») – это программное обеспечение для построения систем процессинга электронных кошельков, используя которое заинтересованная компания сможет предоставить своим Клиентам полный комплекс современных высокотехнологичных услуг по проведению операций с электронными кошельками (электронными денежными средствами с использованием электронными средствами платежа) с помощью мобильного телефона и через Интернет. Пользователи процессинговой системы «DiWa» смогут управлять своими средствами на электронных кошельках, совершать платежные операции по оплате товаров и услуг в торгово-сервисных предприятиях, а также и переводы другим пользователям кошельков или банковских карт через web-интерфейс, мобильное приложение на телефоне и другими дистанционными способами круглосуточно, в удобное для них время.</p>

<p>Отличительной особенностью ПО «DiWa» является наличие готовых интерфейсов для подключения к компаниям – сервис-провайдерам электронной коммерции и электронных переводов, что позволяет компании в короткий срок предоставить клиентам различные каналы пополнения кошельков и использования средств с кошельков. Наличие одновременного подключения к нескольким сервис-провайдерам позволяет Компании выбрать канал пополнений и списаний с наиболее выгодными условиями. Кроме того, наличие нескольких каналов пополнений и списаний повышает надежность работы системы т.к. при отказе одного из каналов можно оперативно переключить операции на другого сервис-провайдера. </p>

<p>Кроме того, в комплект поставки ПО «DiWa» входит набор интерфейсов к Опорному банку, который осуществляет функции Оператора электронных денежных средств в части учета электронных кошельков и проведения операций по ним. </p>

<p>Структурная схема информационного взаимодействия участников процессинга DiWa показана на рисунке:</p>

<p><img src="images/scheme.png" alt="Схема" /></p>
<h1 id='tyerminy-i-opryedyelyeniya'>Термины и определения</h1>
<p><strong>Программная платформа «Digital Wallet» (ПО «DiWa»)</strong> – программное обеспечение, представляющее собой совокупность следующих компонентов:</p>

<ul>
<li>серверное ядро, обеспечивающих ведение баз данных системы и реализацию необходимой функциональности по процессингу операций с электронными кошельками; </li>
<li>внешнего API Витрина для создания клиентских интерфейсов (интернет-сайтов и приложений для мобильных устройств), взаимодействующих с серверной платформой, и предназначенного для управления процессингом электронных кошельков;</li>
<li>модулей коннекторов внешних интерфейсов, обеспечивающих взаимодействие серверного ядра с внешними системами – банками, торгово-сервисными предприятиями, платежными системами, сервис провайдерами и т.п. </li>
</ul>

<p><strong>Компания Витрина</strong> – компания пользователь системы процессинга электронных кошельков, предоставляющая на своих интернет-сайтах или мобильных приложениях (mApp) своим клиентам физическим и юридическим лицам возможность создавать и пополнять электронные кошельки денежными средствами, проводить с их использованием различные операции и выводить денежные средства с кошелков.   </p>

<p><strong>Сайт</strong> – составное произведение, представляющее собой совокупность информации, текстов, графических элементов, дизайна, изображений, фото и видеоматериалов, и иных результатов интеллектуальной деятельности, а также программ для ЭВМ, содержащихся в информационной системе, обеспечивающей доступность такой информации в сети Интернет по сетевому адресу Компании Витрины. </p>

<p><strong>Пользователь</strong> – Физическое лицо, зарегистрированное на Сайте и дееспособное в соответствии с законом.</p>

<p><strong>Личный кабинет</strong>  –  Совокупность защищенных страниц Сайта, созданных в результате регистрации Пользователя, и доступных Пользователю при условии ввода уникальных учетных данных – логина и пароля. В Личном кабинете Пользователь может вносить и редактировать информацию о себе, получать сообщения от других Пользователей, создавать электронные документы, распоряжаться электронными денежными средствами, находящимися в Кошельке, следить за остатком и движением электронных денежных средств в Кошельке, отдавать распоряжения Оператору электронных денежных средств.</p>

<p><strong>Электронная подпись</strong>  – Информация в электронной форме об уникальном имени Пользователя, присоединяемая ко всем электронным документам, создаваемым в Личном кабинете.</p>

<p><strong>Оператор по переводу денежных средств</strong> - организация, которая в соответствии с законодательством Российской Федерации вправе осуществлять перевод денежных средств;</p>

<p><strong>Опорный банк</strong> – оператор по переводу денежных средств в рамках процессинговой системы DiWa (банк или небанковская кредитная организация).  </p>

<p><strong>Оператор электронных денежных средств</strong> - оператор по переводу денежных средств, осуществляющий перевод электронных денежных средств без открытия банковского счета (перевод электронных денежных средств);</p>

<p><strong>Операционный центр (процессинг)</strong> - организация, обеспечивающая в рамках платежной системы для участников платежной системы и их клиентов доступ к услугам по переводу денежных средств, в том числе с использованием электронных средств платежа, а также обмен электронными сообщениями (далее - операционные услуги);</p>

<p><strong>Перевод денежных средств</strong> - действия оператора по переводу денежных средств в рамках применяемых форм безналичных расчетов по предоставлению получателю средств денежных средств плательщика;</p>

<p><strong>Электронные денежные средства</strong> - денежные средства, которые предварительно предоставлены одним лицом (лицом, предоставившим денежные средства) другому лицу, учитывающему информацию о размере предоставленных денежных средств без открытия банковского счета (обязанному лицу), для исполнения денежных обязательств лица, предоставившего денежные средства, перед третьими лицами и в отношении которых лицо, предоставившее денежные средства, имеет право передавать распоряжения исключительно с использованием электронных средств платежа. </p>

<p><strong>Электронное средство платежа</strong> - средство и (или) способ, позволяющие клиенту оператора по переводу денежных средств составлять, удостоверять и передавать распоряжения в целях осуществления перевода денежных средств в рамках применяемых форм безналичных расчетов с использованием информационно-коммуникационных технологий, электронных носителей информации, в том числе платежных карт, а также иных технических устройств;</p>

<p><strong>Электронный кошелек  DW</strong> – электронное средство платежа в рамках процессинговой системы DiWa.</p>

<p><strong>Сервис-провайдер</strong> – компания, предоставляющая услуги по пополнению электронных кошельков и/или списанию средств с них в адрес торгово-сервисных предприятий (ТСП) в оплату предоставляемых ТСП товаров и услуг. </p>
<h1 id='scyenarij-raboty-sistyemy-dlya-mikrokryeditovaniya-p2b'>Сценарий работы системы для микрокредитования P2B</h1>
<ol>
<li> Физическое лицо, которое желает участвовать в системе в качестве Кредитора, регистрируется на сайте МФО Компании Витрины (далее – Витрины).</li>
<li> После регистрации Кредитор получает: 

<ul>
<li>a.  учетную запись в системе Витрины (на основе стандартной процедуры регистрации Компании); </li>
<li>b.  логин/пароль для входа в личный кабинет Витрины; </li>
<li>c.  учетную запись в системе процессинга DiWa, привязанную к учетной записи в системе Витрины; </li>
<li>d.  электронные кошельки для размещения денежных средств, привязанные к Кредитору.</li>
</ul></li>
<li> Пополнение кошелька Кредитора в системе возможно несколькими способами:

<ul>
<li>a.  Банковским переводом. Чтобы разместить деньги в кошельке системы Витрины, Кредитор со счета в своем банке переводит нужную сумму на свой электронный кошелек в системе. </li>
<li>b.  Переводом без открытия банковского счета через системы денежных переводов Золотая Корона, CONTACT и т.п..</li>
<li>c.  Прямым пополнением с банковской карты на сайте МФО</li>
<li>d.  Через терминалы приема платежей </li>
</ul></li>
<li> После пополнения кошелька Кредитор получает возможность: 

<ul>
<li>a.  выбрать из списка Займы, которые он хочет прокредитовать со своего кошелька</li>
<li>b.  оставить системе поручение на подбор Займов.</li>
</ul></li>
<li> После определения Займов, которые будут выданы с использованием  средств Кредитора денежные средства в необходимом объеме списываются с кошелька Кредитора и перечисляются на кошелек Заемщика.</li>
<li> Учет договоров займов в разрезе Кредиторов и Заемщиков ведется в учетной системе Компании Витрины.</li>
<li> Получение денежных средств и доходов от Заемщиков при погашении займов производится путем списания средств с электронных кошельков Заемщиков и перечисления их на кошельки Кредиторов. </li>
<li> Вывод средств с кошельков возможен:

<ul>
<li>a.  Прямым пополнением банковской карты Кредитора на сайте системы с его кошелька</li>
<li>b.  Переводом на банковский счет Кредитора с его кошелька</li>
</ul></li>
</ol>
<h1 id='opisaniye-myetodov'>Описание методов</h1><h2 id='format-zaprosa'>Формат запроса</h2>
<p>Запросы осуществляются посредством протокола HTTP 1.1 с использованием SSL (HTTPS)</p>

<p>Входная точка:</p>

<p><code>https://diwa.online/api/&lt;имя_метода&gt;</code></p>

<p>Требования безопасности:</p>

<ol>
<li>Все сетевые взаимодействия производятся только по HTTPS.</li>
<li>Приложение должно проверять корректность SSL-сертификата сервера. Если SSL-сертификат не прошел проверку, необходимо немедленно прекратить сессию, чтобы не допустить утечку данных авторизации.</li>
<li>Не храните токен авторизации в открытом виде, в том числе в виде cookies.</li>
<li>Никогда не используйте токен авторизации в параметрах запросов (GET, POST, и пр.).</li>
</ol>

<p>Для передачи параметров запроса используется следующий формат:</p>

<ul>
<li>каждый параметр указывается парой ключ/значение в виде параметра POST-запроса;</li>
<li>MIME-тип: <code>application/x-www-form-urlencoded</code>;</li>
<li>Accept: <code>application/json</code>;</li>
<li>кодировка символов: UTF-8.</li>
</ul>
<h1 id='rabota-s-kliyentami'>Работа с клиентами</h1><h2 id='sozdaniye-kliyenta'>Создание клиента</h2><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://diwa.online/api/wallets/createClient'</span>
  -H <span class="s1">'Authorization: Bearer YOUR-API-TOKEN'</span>
  -H <span class="s1">'Content-type: application/json'</span>
  -H <span class="s1">'Accept: application/json'</span>
  --data <span class="s1">'{"userId": 1, "authorized": false, "notifyType": "M", "notifyPeriod": "MONTH"}'</span>
</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="nv">$url</span> <span class="o">=</span> <span class="s1">'https://diwa.online/api/wallets/createClient'</span><span class="p">;</span>

<span class="nv">$headers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">'Authorization: Bearer YOUR-API-TOKEN'</span><span class="p">,</span>
    <span class="s1">'Content-Type: application/json; charset=utf-8'</span><span class="p">,</span>
    <span class="s1">'Accept: application/json'</span><span class="p">,</span>
<span class="p">];</span>

<span class="nv">$data</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">'userId'</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s1">'authorized'</span> <span class="o">=&gt;</span> <span class="kc">false</span><span class="p">,</span>
    <span class="s1">'notifyType'</span> <span class="o">=&gt;</span> <span class="s1">'M'</span><span class="p">,</span>
    <span class="s1">'notifyPeriod'</span> <span class="o">=&gt;</span> <span class="s1">'MONTH'</span><span class="p">,</span>
<span class="p">];</span>

<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">(</span><span class="nv">$url</span><span class="p">);</span>

<span class="nb">curl_setopt_array</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="p">[</span>
  <span class="nx">CURLOPT_HTTPHEADER</span> <span class="o">=&gt;</span> <span class="nv">$headers</span><span class="p">,</span>
  <span class="nx">CURLOPT_RETURNTRANSFER</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">CURLOPT_POST</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">CURLOPT_POSTFIELDS</span> <span class="o">=&gt;</span> <span class="nb">json_encode</span><span class="p">(</span><span class="nv">$data</span><span class="p">),</span>
<span class="p">]);</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nv">$result</span><span class="p">);</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://diwa.online/api/wallets/createClient"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer YOUR-API-TOKEN"</span><span class="p">,</span>
  <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json; charset=utf-8"</span><span class="p">,</span>
  <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json; charset=utf-8"</span>
<span class="p">}</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"userId"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> 
  <span class="s">"authorized"</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span> 
  <span class="s">"notifyType"</span><span class="p">:</span> <span class="s">"M"</span><span class="p">,</span> 
  <span class="s">"notifyPeriod"</span><span class="p">:</span> <span class="s">"MONTH"</span>
<span class="p">}</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</code></pre>
<blockquote>
<p>Возвращает:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="mi">123</span><span class="w">
</span></code></pre>
<p>Создание записи в таблице клиентов процессинга кошельков DiWa. Вызывается по одному разу 
для каждого пользователя. В случае повторного вызова возвращает ID ранее созданного клиента.</p>
<h3 id='zapros'>Запрос</h3>
<p><code>GET https://diwa.online/api/wallets/createClient</code></p>
<h3 id='paramyetry-zaprosa'>Параметры запроса</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Тип</th>
<th>Обязательный</th>
<th>По умолчанию</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td>userId</td>
<td>integer</td>
<td>да</td>
<td>-</td>
<td>Ссылка на пользователя в системе Витрины</td>
</tr>
<tr>
<td>authorized</td>
<td>boolean</td>
<td>да</td>
<td>-</td>
<td>Признак «Персонифицирован»</td>
</tr>
<tr>
<td>notifyType</td>
<td>string</td>
<td>да</td>
<td>-</td>
<td>Тип уведомления, например <code>M</code></td>
</tr>
<tr>
<td>notifyPeriod</td>
<td>string</td>
<td>да</td>
<td>-</td>
<td>Период уведомления, например <code>MONTH</code></td>
</tr>
</tbody></table>
<h3 id='otvyet'>Ответ</h3>
<p>В ответ вы получите ID клиента.</p>

<aside class="success">
ID клиента в ответе - внутренний ID клиента в системе DiWa.
</aside>

<aside class="warning">
В случае редиректа в ответ, следует проверить корректность заголовков запроса.
</aside>
<h3 id='tipy-uvyedomlyenij'>Типы уведомлений</h3>
<table><thead>
<tr>
<th>Тип</th>
<th>Значение</th>
</tr>
</thead><tbody>
<tr>
<td>M</td>
<td>почта</td>
</tr>
<tr>
<td>P</td>
<td>СМС</td>
</tr>
<tr>
<td>MP</td>
<td>почта и СМС</td>
</tr>
<tr>
<td>N</td>
<td>не рассылать</td>
</tr>
</tbody></table>
<h3 id='pyeriod-uvyedomlyenij'>Период уведомлений</h3>
<table><thead>
<tr>
<th>Период</th>
<th>Значение</th>
</tr>
</thead><tbody>
<tr>
<td>INSTANT</td>
<td>моментально</td>
</tr>
<tr>
<td>DAY</td>
<td>ежедневно</td>
</tr>
<tr>
<td>WEEK</td>
<td>еженедельно</td>
</tr>
<tr>
<td>MONTH</td>
<td>ежемесячно</td>
</tr>
</tbody></table>
<h2 id='poluchit-id-polzovatyelya'>Получить ID пользователя</h2><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://diwa.online/api/wallets/getClientId/1'</span>
  -H <span class="s1">'Authorization: Bearer YOUR-API-TOKEN'</span>
  -H <span class="s1">'Accept: application/json'</span>
</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="nv">$userId</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

<span class="nv">$url</span> <span class="o">=</span> <span class="s1">'https://diwa.online/api/wallets/getClientId/'</span> <span class="o">.</span> <span class="nv">$userId</span><span class="p">;</span>

<span class="nv">$headers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">'Authorization: Bearer YOUR-API-TOKEN'</span><span class="p">,</span>
    <span class="s1">'Accept: application/json'</span><span class="p">,</span>
<span class="p">];</span>

<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">(</span><span class="nv">$url</span><span class="p">);</span>

<span class="nb">curl_setopt_array</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="p">[</span>
  <span class="nx">CURLOPT_HTTPHEADER</span> <span class="o">=&gt;</span> <span class="nv">$headers</span><span class="p">,</span>
  <span class="nx">CURLOPT_RETURNTRANSFER</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
<span class="p">]);</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nv">$result</span><span class="p">);</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">userId</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://diwa.online/api/wallets/createClient/{}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">userId</span><span class="p">)</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer YOUR-API-TOKEN"</span><span class="p">,</span>
  <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json; charset=utf-8"</span>
<span class="p">}</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</code></pre>
<blockquote>
<p>Возвращает:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="mi">123</span><span class="w">
</span></code></pre>
<p>Возвращает ID пользователя.</p>
<h3 id='zapros-2'>Запрос</h3>
<p><code>GET https://diwa.online/api/wallets/getClientId/&lt;userId&gt;</code></p>
<h3 id='paramyetry-url'>Параметры URL</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td>userId</td>
<td>ссылка на пользователя в системе Компании Витрины</td>
</tr>
</tbody></table>
<h1 id='oshibki'>Ошибки</h1>
<p>Список ошибок, возвращаемых API:</p>

<table><thead>
<tr>
<th>Код</th>
<th>Значение</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- Запрос сформирован неверно.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- API-ключ не указан или невалидный.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden -- Доступ запрещен.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- Ресурс не найден.</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed -- Неверный HTTP-метод.</td>
</tr>
<tr>
<td>422</td>
<td>Unprocessible Entity -- Параметры запроса содержат ошибки.</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests -- Слишком много запросов.</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- Внутренняя ошибка сервера. Повторите попытку.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- Сервис недоступен. Повторите попытку.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="php">php</a>
                <a href="#" data-language-name="python">python</a>
          </div>
      </div>
    </div>
  </body>
</html>
